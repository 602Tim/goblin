{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///D:/113-2/Breakfast-final-project/app/admin/users/page.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nexport default function AdminUsersPage() {\r\n    const [users, setUsers] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [search, setSearch] = useState(\"\");\r\n\r\n    const roleLabels = {\r\n        CUSTOMER: \"È°ßÂÆ¢\",\r\n        STAFF: \"Âì°Â∑•\",\r\n        CHEF: \"ÂªöÂ∏´\",\r\n        OWNER: \"ËÄÅÈóÜ\",\r\n    };\r\n\r\n    useEffect(() => {\r\n        const getUsers = async () => {\r\n            const response = await fetch(\"/api/users\");\r\n            if (!response.ok) {\r\n                alert(\"Áç≤Âèñ‰ΩøÁî®ËÄÖÂ§±Êïó\");\r\n                return;\r\n            }\r\n            const data = await response.json();\r\n            const formedData = data.map((item) => ({\r\n                id: item.id,\r\n                email: item.email,\r\n                role: item.role,\r\n                name: item.name,\r\n                isBanned: item.isBanned,\r\n                createdAt: new Date(item.createdAt).toLocaleString(\"sv\"),\r\n            }));\r\n            setUsers(formedData);\r\n            setLoading(false);\r\n        };\r\n        getUsers();\r\n    }, []);\r\n\r\n    const handleRoleChange = async (userId, newRole) => {\r\n        setUsers((prev) =>\r\n            prev.map((u) => (u.id === userId ? { ...u, role: newRole } : u))\r\n        );\r\n        const response = await fetch(`/api/users/${userId}/role`, {\r\n            method: \"PATCH\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({ role: newRole }),\r\n        });\r\n        if (!response.ok) {\r\n            alert(\"Êõ¥Êîπ‰ΩøÁî®ËÄÖÊ¨äÈôêÂ§±Êïó\");\r\n        }\r\n    };\r\n\r\n    const handleBanToggle = async (userId, newStatus) => {\r\n        const response = await fetch(`/api/users/${userId}/ban`, {\r\n            method: \"PATCH\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({ isBanned: newStatus }),\r\n        });\r\n        if (!response.ok) {\r\n            alert(\"Êõ¥Êñ∞ÂÅúÊ¨äÁãÄÊÖãÂ§±Êïó\");\r\n            return;\r\n        }\r\n        setUsers((prev) =>\r\n            prev.map((user) =>\r\n                user.id === userId ? { ...user, isBanned: newStatus } : user\r\n            )\r\n        );\r\n    };\r\n\r\n    const filteredUsers = users.filter((u) =>\r\n        `${u.name}${u.email}`.toLowerCase().includes(search.toLowerCase())\r\n    );\r\n\r\n    return (\r\n        <div className=\"min-h-screen px-6 py-10 bg-gradient-to-br from-orange-100 via-pink-100 to-red-100\">\r\n            <div className=\"max-w-6xl mx-auto\">\r\n                <h1 className=\"text-3xl font-bold text-gray-800 mb-6\">\r\n                    üë• ‰ΩøÁî®ËÄÖÁÆ°ÁêÜ\r\n                </h1>\r\n\r\n                <input\r\n                    type=\"text\"\r\n                    value={search}\r\n                    onChange={(e) => setSearch(e.target.value)}\r\n                    placeholder=\"ÊêúÂ∞ãÂêçÁ®±Êàñ Email...\"\r\n                    className=\"w-full mb-6 px-4 py-2 rounded-md border focus:outline-none focus:ring-2 focus:ring-pink-400\"\r\n                />\r\n\r\n                {loading ? (\r\n                    <div className=\"space-y-4\">\r\n                        {[...Array(5)].map((_, i) => (\r\n                            <div\r\n                                key={i}\r\n                                className=\"animate-pulse h-20 bg-white rounded-lg shadow\"\r\n                            />\r\n                        ))}\r\n                    </div>\r\n                ) : (\r\n                    <motion.div\r\n                        layout\r\n                        className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\"\r\n                    >\r\n                        {filteredUsers.map((user) => (\r\n                            <motion.div\r\n                                layout\r\n                                key={user.id}\r\n                                className=\"bg-white rounded-xl shadow-lg p-5\"\r\n                                initial={{ opacity: 0, y: 20 }}\r\n                                animate={{ opacity: 1, y: 0 }}\r\n                                transition={{ duration: 0.3 }}\r\n                            >\r\n                                <h3 className=\"text-lg font-bold text-gray-800 mb-1\">\r\n                                    {user.name}\r\n                                </h3>\r\n                                <p className=\"text-sm text-gray-600 mb-1\">\r\n                                    {user.email}\r\n                                </p>\r\n                                <p className=\"text-xs text-gray-500 mb-2\">\r\n                                    Âª∫Á´ãÊôÇÈñìÔºö{new Date(user.createdAt).toLocaleDateString()}\r\n                                </p>\r\n\r\n                                {/* ÁãÄÊÖãÈ°ØÁ§∫ */}\r\n                                <p className={`text-sm font-semibold mb-2 ${user.isBanned ? \"text-red-500\" : \"text-green-600\"}`}>\r\n                                    ÁãÄÊÖãÔºö{user.isBanned ? \"Â∑≤ÂÅúÊ¨ä\" : \"Ê≠£Â∏∏\"}\r\n                                </p>\r\n\r\n                                {/* ÂàáÊèõÂÅúÊ¨äÊåâÈàï */}\r\n                                <button\r\n                                    onClick={() => handleBanToggle(user.id, !user.isBanned)}\r\n                                    className={`px-3 py-1 mb-3 rounded text-white text-sm \r\n                                        ${user.isBanned ? \"bg-green-500 hover:bg-green-600\" : \"bg-red-500 hover:bg-red-600\"}`}\r\n                                >\r\n                                    {user.isBanned ? \"Ëß£Èô§ÂÅúÊ¨ä\" : \"ÂÅúÊ¨ä\"}\r\n                                </button>\r\n\r\n                                {/* ËßíËâ≤ÂàáÊèõ */}\r\n                                <label className=\"text-sm font-medium text-gray-700 block mt-2\">\r\n                                    ÂàáÊèõËßíËâ≤\r\n                                </label>\r\n                                <select\r\n                                    value={user.role}\r\n                                    onChange={(e) =>\r\n                                        handleRoleChange(user.id, e.target.value)\r\n                                    }\r\n                                    className=\"block w-full mt-1 px-3 py-2 border rounded focus:outline-none focus:ring-pink-400\"\r\n                                    disabled={user.role === \"OWNER\"}\r\n                                >\r\n                                    <option value={user.role}>\r\n                                        {roleLabels[user.role] || user.role}\r\n                                    </option>\r\n                                    {Object.entries(roleLabels)\r\n                                        .filter(\r\n                                            ([key]) =>\r\n                                                key !== \"OWNER\" && key !== user.role\r\n                                        )\r\n                                        .map(([key, label]) => (\r\n                                            <option key={key} value={key}>\r\n                                                {label}\r\n                                            </option>\r\n                                        ))}\r\n                                </select>\r\n                            </motion.div>\r\n                        ))}\r\n                    </motion.div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n    }\r\n\r\n\r\n"],"names":[],"mappings":";;;;AAEA;AACA;;;AAHA;;;AAKe,SAAS;;IACpB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE,EAAE;IACrC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAErC,MAAM,aAAa;QACf,UAAU;QACV,OAAO;QACP,MAAM;QACN,OAAO;IACX;IAEA,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;oCAAE;YACN,MAAM;qDAAW;oBACb,MAAM,WAAW,MAAM,MAAM;oBAC7B,IAAI,CAAC,SAAS,EAAE,EAAE;wBACd,MAAM;wBACN;oBACJ;oBACA,MAAM,OAAO,MAAM,SAAS,IAAI;oBAChC,MAAM,aAAa,KAAK,GAAG;wEAAC,CAAC,OAAS,CAAC;gCACnC,IAAI,KAAK,EAAE;gCACX,OAAO,KAAK,KAAK;gCACjB,MAAM,KAAK,IAAI;gCACf,MAAM,KAAK,IAAI;gCACf,UAAU,KAAK,QAAQ;gCACvB,WAAW,IAAI,KAAK,KAAK,SAAS,EAAE,cAAc,CAAC;4BACvD,CAAC;;oBACD,SAAS;oBACT,WAAW;gBACf;;YACA;QACJ;mCAAG,EAAE;IAEL,MAAM,mBAAmB,OAAO,QAAQ;QACpC,SAAS,CAAC,OACN,KAAK,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,SAAS;oBAAE,GAAG,CAAC;oBAAE,MAAM;gBAAQ,IAAI;QAEjE,MAAM,WAAW,MAAM,MAAM,CAAC,WAAW,EAAE,OAAO,KAAK,CAAC,EAAE;YACtD,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBAAE,MAAM;YAAQ;QACzC;QACA,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,MAAM;QACV;IACJ;IAEA,MAAM,kBAAkB,OAAO,QAAQ;QACnC,MAAM,WAAW,MAAM,MAAM,CAAC,WAAW,EAAE,OAAO,IAAI,CAAC,EAAE;YACrD,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBAAE,UAAU;YAAU;QAC/C;QACA,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,MAAM;YACN;QACJ;QACA,SAAS,CAAC,OACN,KAAK,GAAG,CAAC,CAAC,OACN,KAAK,EAAE,KAAK,SAAS;oBAAE,GAAG,IAAI;oBAAE,UAAU;gBAAU,IAAI;IAGpE;IAEA,MAAM,gBAAgB,MAAM,MAAM,CAAC,CAAC,IAChC,GAAG,EAAE,IAAI,GAAG,EAAE,KAAK,EAAE,CAAC,WAAW,GAAG,QAAQ,CAAC,OAAO,WAAW;IAGnE,qBACI,6LAAC;QAAI,WAAU;kBACX,cAAA,6LAAC;YAAI,WAAU;;8BACX,6LAAC;oBAAG,WAAU;8BAAwC;;;;;;8BAItD,6LAAC;oBACG,MAAK;oBACL,OAAO;oBACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;oBACzC,aAAY;oBACZ,WAAU;;;;;;gBAGb,wBACG,6LAAC;oBAAI,WAAU;8BACV;2BAAI,MAAM;qBAAG,CAAC,GAAG,CAAC,CAAC,GAAG,kBACnB,6LAAC;4BAEG,WAAU;2BADL;;;;;;;;;yCAMjB,6LAAC,6LAAA,CAAA,SAAM,CAAC,GAAG;oBACP,MAAM;oBACN,WAAU;8BAET,cAAc,GAAG,CAAC,CAAC,qBAChB,6LAAC,6LAAA,CAAA,SAAM,CAAC,GAAG;4BACP,MAAM;4BAEN,WAAU;4BACV,SAAS;gCAAE,SAAS;gCAAG,GAAG;4BAAG;4BAC7B,SAAS;gCAAE,SAAS;gCAAG,GAAG;4BAAE;4BAC5B,YAAY;gCAAE,UAAU;4BAAI;;8CAE5B,6LAAC;oCAAG,WAAU;8CACT,KAAK,IAAI;;;;;;8CAEd,6LAAC;oCAAE,WAAU;8CACR,KAAK,KAAK;;;;;;8CAEf,6LAAC;oCAAE,WAAU;;wCAA6B;wCAChC,IAAI,KAAK,KAAK,SAAS,EAAE,kBAAkB;;;;;;;8CAIrD,6LAAC;oCAAE,WAAW,CAAC,2BAA2B,EAAE,KAAK,QAAQ,GAAG,iBAAiB,kBAAkB;;wCAAE;wCACzF,KAAK,QAAQ,GAAG,QAAQ;;;;;;;8CAIhC,6LAAC;oCACG,SAAS,IAAM,gBAAgB,KAAK,EAAE,EAAE,CAAC,KAAK,QAAQ;oCACtD,WAAW,CAAC;wCACR,EAAE,KAAK,QAAQ,GAAG,oCAAoC,+BAA+B;8CAExF,KAAK,QAAQ,GAAG,SAAS;;;;;;8CAI9B,6LAAC;oCAAM,WAAU;8CAA+C;;;;;;8CAGhE,6LAAC;oCACG,OAAO,KAAK,IAAI;oCAChB,UAAU,CAAC,IACP,iBAAiB,KAAK,EAAE,EAAE,EAAE,MAAM,CAAC,KAAK;oCAE5C,WAAU;oCACV,UAAU,KAAK,IAAI,KAAK;;sDAExB,6LAAC;4CAAO,OAAO,KAAK,IAAI;sDACnB,UAAU,CAAC,KAAK,IAAI,CAAC,IAAI,KAAK,IAAI;;;;;;wCAEtC,OAAO,OAAO,CAAC,YACX,MAAM,CACH,CAAC,CAAC,IAAI,GACF,QAAQ,WAAW,QAAQ,KAAK,IAAI,EAE3C,GAAG,CAAC,CAAC,CAAC,KAAK,MAAM,iBACd,6LAAC;gDAAiB,OAAO;0DACpB;+CADQ;;;;;;;;;;;;2BAnDpB,KAAK,EAAE;;;;;;;;;;;;;;;;;;;;;AA+DxC;GApKoB;KAAA","debugId":null}}]
}